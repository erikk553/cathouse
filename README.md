# Домик СберКота

Проект "Домик СберКота" — это приложение, которое синхронизует печать с видео и управляет ей открыток с помощью кнопки, подключенной к Arduino через COM-порт. Приложение является одной из версий ПО для физического стенда на мероприятиях.


## Установка

Используйте `create_venv.bat` либо проследуйте инструкции ниже. 

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/erikk553/cathouse.git
   cd cathouse
   ```

2. Создайте и активируйте виртуальное окружение:

   ```bash
   python -m venv venv
   venv/Scripts/activate
   ```

3. Установите необходимые зависимости:

   ```bash
   pip install -r requirements.txt
   ```

## Настройка

1. Подключите устройство ардуино к компьютеру и определите COM-порт, используя команду:

   ```bash
   python -m serial.tools.list_ports
   ```

2. Измените настройки в `app.py`, указав правильный COM-порт:

   ```python
   ARDUINO_BUTTON_PORT = "COM3"  # Замените на ваш порт
   ```

3. Установите необходимые параметры окна в настройках в `app.py`:

   ```python
   SCREEN_WIDTH, SCREEN_HEIGHT = 1920, 1080 # Размеры видео в окне приложения
   FULLSCREEN = True # Полноэкранный режим: True - включен, False - выключен
   ```

4. Синхронизируйте печать и видеоряд изменив параметр задержки в `app.py`:
   
   ```python
   PRINT_DELAY_SECONDS = 3.0  # Задержка отправки открытки на печать в секундах
   ```

5. При необходимости измените остальные значения параметров в разделе "Настройки" в `app.py`:

   ```python
   # Звук
   MUSIC_BG_PATH = "./sounds/SBER_CAT_LoFi_1.5_no sfx.wav" # Путь к фоновой музыке
   MUSIC_BG_VOLUME = 0.5 # Гомкость музыки от 0 до 1
   DOORBELL_SOUND_PATH = "./sounds/doorbell.wav" # Путь к звуку звонка
   DOORBELL_SOUND_VOLUME = 0.9 # Гомкость звука звонка от 0 до 1

   # Видео
   VIDEO_WRITE_PATH = "./videos/Видео 1_СберКот_подпись открыток.mp4" # Путь к видео ожидания
   VIDEO_SEND_PATH  = "./videos/Видео 2_СберКот_отправка открыток.mp4" # Путь к видео при нажатии

   # Печать
   IMAGE_DIR = './images' # Папка с открытками для печати
   ```

6. Выберите принтер по умолчанию и установите необходимые параметры печати в ОС.
Текущие изображения цветные, в соотношении 10x15, размер примерно формат A6.


## Запуск

Запустите приложение с помощью `run.bat` или воспользуйтесь командой:

```bash
venv/Scripts/python app.py
```

## Использование

- Нажмите на кнопку на Arduino или ЛКМ, чтобы инициировать процесс печати.
- Приложение будет воспроизводить видео и печатать открытку после нажатия кнопки.